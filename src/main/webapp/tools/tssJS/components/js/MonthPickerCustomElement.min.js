"use strict";var _createClass=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _CustomElement(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(_CustomElement.prototype,HTMLElement.prototype),Object.setPrototypeOf(_CustomElement,HTMLElement),function(e){var t=new Date,r={start:"2000",end:"2030",year:t.getFullYear(),month:t.getMonth()+1},n=[1,2,3,4,5,6,7,8,9,10,11,12],a=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.show=!1,e._fakeShadowDOM,e._cacheDOM={},e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this.opts=this.setProperties(r,this.attributes);var e=l("div","b2-month-picker"),t=this._createYearPanel(),n=this._createMonthPanel();e.appendChild(t),e.appendChild(n),this._selected(+this.opts.year,+this.opts.month);var a=l("div","fake-shadow-dom");a.appendChild(e),this._fakeShadowDOM=a,n.addEventListener("click",this._clickHandler.bind(this))}},{key:"attributeChangedCallback",value:function(e){}},{key:"setProperties",value:function(e,t){var n={},a=!0,r=!1,o=void 0;try{for(var s,i=t[Symbol.iterator]();!(a=(s=i.next()).done);a=!0){var c=s.value,l=c.name,h=c.value;n[l]=h}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}var u=Object.assign({},e,n);return u}},{key:"open",value:function(){this.show||(this.show=!0,this.appendChild(this._fakeShadowDOM))}},{key:"close",value:function(){this.show&&(this.show=!1,this.removeChild(this._fakeShadowDOM))}},{key:"_selected",value:function(e,t){var n=this._cacheDOM,a=n.yearText,r=n.back,o=n.forward,s=n.monthPanel;a.textContent=e;var i=this.opts,c=i.start,l=i.end;e<=+c&&r.classList.add("b2-year-panel__btn_disabled"),+l<=e&&o.classList.add("b2-year-panel__btn_disabled"),s.childNodes[t-1].classList.add("b2-month_selected")}},{key:"_createYearPanel",value:function(){var a=this,r=l("span","b2-year-panel__text"),o=l("button","b2-year-panel__btn ion-ios-arrow-back"),s=l("button","b2-year-panel__btn ion-ios-arrow-forward"),e=function(n){return function(){var e=a.opts.year,t=n+e;return a.opts.year=t,r.textContent=t}},i=e(1),c=e(-1);o.onclick=function(){var e=a.opts,t=e.year,n=e.start;+t<=+n||(s.classList.remove("b2-year-panel__btn_disabled"),c()<=+n&&o.classList.add("b2-year-panel__btn_disabled"))},s.onclick=function(){var e=a.opts,t=e.year,n=e.end;+n<=+t||(o.classList.remove("b2-year-panel__btn_disabled"),i()>=+n&&s.classList.add("b2-year-panel__btn_disabled"))};var t=l("div","b2-month-picker__year-panel");return t.appendChild(o),t.appendChild(r),t.appendChild(s),Object.assign(this._cacheDOM,{back:o,forward:s,yearText:r}),t}},{key:"_createMonthPanel",value:function(){var a=l("div","b2-month-picker__month-panel");return n.forEach(function(e){var t=l("div","b2-month-panel__item b2-month");t.dataset.month=e;var n=l("span","b2-month__text");n.textContent=e,t.appendChild(n),a.appendChild(t)}),Object.assign(this._cacheDOM,{monthPanel:a}),a}},{key:"_clickHandler",value:function(e){var t=e||window.event,n=t.target||t.srcElement;if(n!==t.currentTarget){for(var a=n.dataset.month;void 0===a;)n=n.parentNode,a=n.dataset.month;if(a!==this.opts.month){var r=this._cacheDOM.monthPanel.childNodes;[].concat(_toConsumableArray(r)).forEach(function(e){return e.classList.remove("b2-month_selected")}),r[a-1].classList.add("b2-month_selected")}var o=new CustomEvent("change",{detail:{month:a,year:this.opts.year}});this.dispatchEvent(o),t.stopPropagation()}}}]),t}(_CustomElement);function l(e,t){var n=document.createElement(e);return t&&(n.className=t),n}customElements.define("month-picker",a);var o=new Map;e.setOptions=function(e){Object.assign(r,e)},e.get=function(e){var t=o.get(e)||document.getElementById(e);return o.set(e,t),t},e.mixin=function(e){}}(window.MonthPicker={});