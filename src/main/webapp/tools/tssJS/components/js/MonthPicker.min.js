"use strict";var _createClass=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){var t=new Date,s={start:"2000",end:"2030",year:t.getFullYear(),month:t.getMonth()+1},i=function(){},n=[1,2,3,4,5,6,7,8,9,10,11,12],a=function(){function r(e){_classCallCheck(this,r),this.show=!1,this._ref,this._cacheDOM={},this.opts=this._setProperties(s,e);var t=l("div","b2-month-picker-wrapper"),n=this._createYearPanel(),a=this._createMonthPanel();t.appendChild(n),t.appendChild(a),this._selected(+this.opts.year,+this.opts.month);var o=l("div","fake-shadow-dom");o.appendChild(t),this._dom=o,this._dom.addEventListener("click",function(e){var t=e||window.event;t.stopPropagation()},!1),a.addEventListener("click",this._clickHandler.bind(this))}return _createClass(r,[{key:"ref",value:function(e){var t=e.getBoundingClientRect(),n=t.bottom,a=t.left;return this._dom.style.top=n+"px",this._dom.style.left=a+"px",this._ref=e,this}},{key:"open",value:function(){this.show||(this.show=!0,document.body.appendChild(this._dom))}},{key:"close",value:function(){this.show&&(this.show=!1,document.body.removeChild(this._dom))}},{key:"_setProperties",value:function(e,t){return void 0===t?Object.assign({},e):Object.assign({},e,t)}},{key:"_selected",value:function(e,t){var n=this._cacheDOM,a=n.yearText,o=n.back,r=n.forward,s=n.monthPanel;a.textContent=e;var i=this.opts,c=i.start,l=i.end;e<=+c&&o.classList.add("b2-year-panel__btn_disabled"),+l<=e&&r.classList.add("b2-year-panel__btn_disabled"),s.childNodes[t-1].classList.add("b2-month_selected")}},{key:"_createYearPanel",value:function(){var a=this,o=l("span","b2-year-panel__text"),r=l("button","b2-year-panel__btn ion-ios-arrow-back"),s=l("button","b2-year-panel__btn ion-ios-arrow-forward"),e=function(n){return function(){var e=a.opts.year,t=+e+n;return a.opts.year=t,o.textContent=t}},i=e(1),c=e(-1);r.onclick=function(){var e=a.opts,t=e.year,n=e.start;+t<=+n||(s.classList.remove("b2-year-panel__btn_disabled"),c()<=+n&&r.classList.add("b2-year-panel__btn_disabled"))},s.onclick=function(){var e=a.opts,t=e.year,n=e.end;+n<=+t||(r.classList.remove("b2-year-panel__btn_disabled"),i()>=+n&&s.classList.add("b2-year-panel__btn_disabled"))};var t=l("div","b2-month-picker__year-panel");return t.appendChild(r),t.appendChild(o),t.appendChild(s),Object.assign(this._cacheDOM,{back:r,forward:s,yearText:o}),t}},{key:"_createMonthPanel",value:function(){var a=l("div","b2-month-picker__month-panel");return n.forEach(function(e){var t=l("div","b2-month-panel__item b2-month");t.dataset.month=e;var n=l("span","b2-month__text");n.textContent=e,t.appendChild(n),a.appendChild(t)}),Object.assign(this._cacheDOM,{monthPanel:a}),a}},{key:"_clickHandler",value:function(e){var t=e||window.event,n=t.target||t.srcElement;if(n!==t.currentTarget){for(var a=n.dataset.month;void 0===a;)n=n.parentNode,a=n.dataset.month;if(a!==this.opts.month){var o=this._cacheDOM.monthPanel.childNodes;[].concat(_toConsumableArray(o)).forEach(function(e){return e.classList.remove("b2-month_selected")}),o[a-1].classList.add("b2-month_selected")}i(this._ref,{month:a,year:this.opts.year}),this.close(),t.stopPropagation()}}}]),r}();function l(e,t){var n=document.createElement(e);return t&&(n.className=t),n}var o,r=(o=void 0,function(e){return o||(o=new a(e))});[].concat(_toConsumableArray(document.getElementsByClassName("b2-month-picker"))).forEach(function(n){n.addEventListener("click",function(e){r().ref(n).open();var t=e||window.event;t.stopPropagation()},!1)}),document.addEventListener("click",function(e){r().close()},!1),e.setOptions=function(e){Object.assign(s,e)},e.onChange=function(e){i=e},e.close=function(){r().close()}}(window.MonthPicker={});